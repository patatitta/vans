---


 const {arrayImagenes} = Astro.props;

  console.log("aaaaaa "+ arrayImagenes)

  interface interfazArrayImagenes{
    url: string
  }

---

<div class="carrusel w-full h-full relative group overflow-hidden">
  <div class="marco w-full h-full overflow-auto">
    <div class="imagenes flex transition-all duration-150">

      {arrayImagenes.map((Imagen: interfazArrayImagenes) =>(

        <img
        class="w-full min-w-full h-full object-contain p-0 shrink-0"
        src={Imagen.url}
        />
      ))}
</div>
</div>

  <!-- Flecha izquierda -->
  <button
    class="absolute leftArrow -left-10 top-1/2 -translate-y-1/2 z-30 opacity-0 hover:bg-white p-2 group-hover:opacity-100 transition-all duration-200 group-hover:left-5 cursor-pointer hidden md:block"
  >
    <svg
      class="w-6 h-6 rotate-180"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 32 32"
    >
      <path
        fill="currentColor"
        d="M9.91 24.96 19.37 16 9.9 7.04l1.5-1.58L22.54 16 11.41 26.54l-1.5-1.58Z"
      ></path>
    </svg>
  </button>

  <!-- Flecha derecha -->
  <button
    class="absolute rightArrow -right-10 top-1/2 -translate-y-1/2 z-30 opacity-0 p-2 hover:bg-white group-hover:opacity-100 transition-all duration-200 group-hover:right-5 overflow-hidden cursor-pointer hidden md:block"
  >
    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
      <path
        fill="currentColor"
        d="M9.91 24.96 19.37 16 9.9 7.04l1.5-1.58L22.54 16 11.41 26.54l-1.5-1.58Z"
      ></path>
    </svg>
  </button>

  <!-- Simbolo mas -->

  <button
    class="absolute right-4 top-9 -translate-y-1/2 z z-20 cursor-pointer p-2 hover:bg-white hidden md:block"
  >
    <svg
      class="w-6 h-6"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 32 32"
      id="close"
    >
      <path
        xmlns="http://www.w3.org/2000/svg"
        d="M17.1 5.9v9h9v2.2h-9v9h-2.2v-9h-9v-2.2h9v-9h2.2Z"></path>
    </svg>
  </button>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {

const imagenes = document.querySelectorAll<HTMLElement>(".imagenes");
  const rightArrow = document.querySelectorAll<HTMLElement>(".rightArrow");
  const leftArrow = document.querySelectorAll<HTMLElement>(".leftArrow");

  let contador = 0;
  // function moverDerecha(){
  //     if(imagenes != null){
  //         imagenes.append(imagenes.firstElementChild);
  //     }
  // }
  // imagenes?.addEventListener("click", moverDerecha);

  // function moverIzquierda(){
  //     if(imagenes != null){
  //         imagenes.prepend(imagenes.lastElementChild);
  //     }
  // }
  // imagenes?.addEventListener("keyup", moverIzquierda);
  // Loop through each element
  for (let iteracion of imagenes) {
    let currentPosition = 0;

    function moverDerecha() {
      if (currentPosition > -400) {
        currentPosition -= 100;
        iteracion!.style.transform = `translateX(${currentPosition}%)`;
      }
    }

    function moverIzquierda() {
      if (currentPosition <= -100) {
        currentPosition += 100;
        iteracion!.style.transform = `translateX(${currentPosition}%)`;
      }
    }

    if (rightArrow[contador]!=null){
      rightArrow[contador].addEventListener("click", moverDerecha);
    }
    if (leftArrow[contador]!=null){
      leftArrow[contador].addEventListener("click", moverIzquierda);
    }    
    contador += 1;
  }
})

</script>
